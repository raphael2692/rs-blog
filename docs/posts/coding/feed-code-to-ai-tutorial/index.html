<!doctype html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>Feed code efficiently to AI with Code Merger // Raffaele Spataro</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Raffaele Spataro" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.6572706294358157e91e58d0b754256a86f60701dfb73d05088a26c6493a83bb.css" />
    

    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Feed code efficiently to AI with Code Merger">
  <meta name="twitter:description" content="Introduction In this tutorial, we will guide you through creating a Python script that converts project directories into a structured format suitable for feeding code to AI/LLM (Large Language Models). This script will help you prepare your codebase by generating a structured file that includes the project structure and the contents of the files, making it easier for the AI/LLM to process and understand the code.
Project Structure Here’s the structure of the project:">

    <meta property="og:url" content="http://localhost:1313/posts/coding/feed-code-to-ai-tutorial/">
  <meta property="og:site_name" content="Raffaele Spataro">
  <meta property="og:title" content="Feed code efficiently to AI with Code Merger">
  <meta property="og:description" content="Introduction In this tutorial, we will guide you through creating a Python script that converts project directories into a structured format suitable for feeding code to AI/LLM (Large Language Models). This script will help you prepare your codebase by generating a structured file that includes the project structure and the contents of the files, making it easier for the AI/LLM to process and understand the code.
Project Structure Here’s the structure of the project:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-01T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-12-01T00:00:00+00:00">
    <meta property="article:tag" content="Coding">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Markdown">
    <meta property="article:tag" content="Tutorial">


  </head>
  <body>
    <header class="app-header">
      <a href="/"><img class="app-header-avatar" src="/avataaars.png" alt="Raffaele Spataro" /></a>
      <span class="app-header-title">Raffaele Spataro</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>Welcome to my blog! I share insights on coding, my projects, and occasional snippets of my life. Enjoy exploring!</p>
      <div class="app-header-social">
        
          <a href="https://www.linkedin.com/in/raffaele-spataro-44194b57/" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-linkedin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>linkedin</title><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
          </a>
        
          <a href="https://github.com/raphael2692" target="_blank" rel="noreferrer noopener me">
            <svg class="icon icon-github" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Feed code efficiently to AI with Code Merger</h1>
      <div class="post-meta">
        <div>
          <svg class="icon icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
          Dec 1, 2023
        </div>
        <div>
          <svg class="icon icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>clock</title><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          4 min read
        </div>
        <div>
          <svg class="icon icon-tag" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
              <a class="tag" href="/tags/coding/">Coding</a>
              <a class="tag" href="/tags/python/">Python</a>
              <a class="tag" href="/tags/markdown/">Markdown</a>
              <a class="tag" href="/tags/tutorial/">Tutorial</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h1 id="introduction">Introduction</h1>
<p>In this tutorial, we will guide you through creating a Python script that converts project directories into a structured format suitable for feeding code to AI/LLM (Large Language Models). This script will help you prepare your codebase by generating a structured file that includes the project structure and the contents of the files, making it easier for the AI/LLM to process and understand the code.</p>
<h2 id="project-structure">Project Structure</h2>
<p>Here&rsquo;s the structure of the project:</p>
<pre tabindex="0"><code>merge-to-markdown/
│
├── main.py
</code></pre><h2 id="step-1-setting-up-the-script">Step 1: Setting Up the Script</h2>
<p>First, let&rsquo;s set up the basic structure of the script. We&rsquo;ll initialize the necessary libraries and define the default extensions and output file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> argparse
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pathlib <span style="color:#f92672">import</span> Path
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> tkinter <span style="color:#66d9ef">as</span> tk
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Updated to include more markdown-supported languages</span>
</span></span><span style="display:flex;"><span>DEFAULT_EXTENSIONS <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;ts&#34;</span>, <span style="color:#e6db74">&#34;py&#34;</span>, <span style="color:#e6db74">&#34;css&#34;</span>, <span style="color:#e6db74">&#34;scss&#34;</span>, <span style="color:#e6db74">&#34;html&#34;</span>, <span style="color:#e6db74">&#34;js&#34;</span>, <span style="color:#e6db74">&#34;jsx&#34;</span>, <span style="color:#e6db74">&#34;tsx&#34;</span>, <span style="color:#e6db74">&#34;yaml&#34;</span>, <span style="color:#e6db74">&#34;yml&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;json&#34;</span>, <span style="color:#e6db74">&#34;md&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>, <span style="color:#e6db74">&#34;cpp&#34;</span>, <span style="color:#e6db74">&#34;java&#34;</span>, <span style="color:#e6db74">&#34;rb&#34;</span>, <span style="color:#e6db74">&#34;go&#34;</span>, <span style="color:#e6db74">&#34;rs&#34;</span>, <span style="color:#e6db74">&#34;sh&#34;</span>, <span style="color:#e6db74">&#34;pl&#34;</span>, <span style="color:#e6db74">&#34;php&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;swift&#34;</span>, <span style="color:#e6db74">&#34;kotlin&#34;</span>, <span style="color:#e6db74">&#34;r&#34;</span>, <span style="color:#e6db74">&#34;m&#34;</span>, <span style="color:#e6db74">&#34;h&#34;</span>
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>DEFAULT_OUTPUT_FILE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;merged.md&#34;</span>
</span></span></code></pre></div><h2 id="step-2-escaping-markdown-characters">Step 2: Escaping Markdown Characters</h2>
<p>We need to escape special Markdown characters to ensure they are displayed correctly in the generated Markdown file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">escape_markdown_characters</span>(text):
</span></span><span style="display:flex;"><span>    escaped_text <span style="color:#f92672">=</span> text<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\\\</span><span style="color:#e6db74">&#34;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;_&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">_&#34;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;#&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">#&#34;</span>)<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#34;`&#34;</span>, <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">`&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> escaped_text
</span></span></code></pre></div><h2 id="step-3-creating-a-folder-structure-illustration">Step 3: Creating a Folder Structure Illustration</h2>
<p>Next, we&rsquo;ll create a function to generate an illustration of the folder structure. This function will recursively traverse the directory and create a textual representation of the folder structure.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">create_folder_structure_illustration</span>(root_path, extensions, skip_folders):
</span></span><span style="display:flex;"><span>    tree <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> path <span style="color:#f92672">in</span> sorted(root_path<span style="color:#f92672">.</span>rglob(<span style="color:#e6db74">&#39;*&#39;</span>)):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> any(skip_folder <span style="color:#f92672">in</span> path<span style="color:#f92672">.</span>parts <span style="color:#66d9ef">for</span> skip_folder <span style="color:#f92672">in</span> skip_folders):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> path<span style="color:#f92672">.</span>is_dir():
</span></span><span style="display:flex;"><span>            depth <span style="color:#f92672">=</span> len(path<span style="color:#f92672">.</span>relative_to(root_path)<span style="color:#f92672">.</span>parts)
</span></span><span style="display:flex;"><span>            indent <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;    &#39;</span> <span style="color:#f92672">*</span> depth
</span></span><span style="display:flex;"><span>            tree <span style="color:#f92672">+=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>indent<span style="color:#e6db74">}{</span>path<span style="color:#f92672">.</span>name<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> path<span style="color:#f92672">.</span>suffix[<span style="color:#ae81ff">1</span>:] <span style="color:#f92672">in</span> extensions:
</span></span><span style="display:flex;"><span>            depth <span style="color:#f92672">=</span> len(path<span style="color:#f92672">.</span>relative_to(root_path)<span style="color:#f92672">.</span>parts) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            indent <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;    &#39;</span> <span style="color:#f92672">*</span> (depth <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>            tree <span style="color:#f92672">+=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>indent<span style="color:#e6db74">}{</span>path<span style="color:#f92672">.</span>name<span style="color:#e6db74">}</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> tree
</span></span></code></pre></div><h2 id="step-4-merging-files">Step 4: Merging Files</h2>
<p>We&rsquo;ll create a function to merge the contents of the files into a single structured file. This function will read the contents of each file and add them to the structured file with the appropriate syntax highlighting.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">merge_files</span>(extensions, root_path, skip_folders):
</span></span><span style="display:flex;"><span>    content <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> ext <span style="color:#f92672">in</span> extensions:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> file_path <span style="color:#f92672">in</span> root_path<span style="color:#f92672">.</span>rglob(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;*.</span><span style="color:#e6db74">{</span>ext<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> any(skip_folder <span style="color:#f92672">in</span> file_path<span style="color:#f92672">.</span>parts <span style="color:#66d9ef">for</span> skip_folder <span style="color:#f92672">in</span> skip_folders):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>                file_path_str <span style="color:#f92672">=</span> str(file_path)
</span></span><span style="display:flex;"><span>                escaped_file_path <span style="color:#f92672">=</span> escape_markdown_characters(file_path_str)
</span></span><span style="display:flex;"><span>                content <span style="color:#f92672">+=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">## </span><span style="color:#e6db74">{</span>escaped_file_path<span style="color:#e6db74">}</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                language_map <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;py&#34;</span>: <span style="color:#e6db74">&#34;python&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;html&#34;</span>: <span style="color:#e6db74">&#34;html&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;css&#34;</span>: <span style="color:#e6db74">&#34;css&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;js&#34;</span>: <span style="color:#e6db74">&#34;javascript&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;jsx&#34;</span>: <span style="color:#e6db74">&#34;jsx&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;tsx&#34;</span>: <span style="color:#e6db74">&#34;tsx&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;ts&#34;</span>: <span style="color:#e6db74">&#34;typescript&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;scss&#34;</span>: <span style="color:#e6db74">&#34;scss&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;yaml&#34;</span>: <span style="color:#e6db74">&#34;yaml&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;yml&#34;</span>: <span style="color:#e6db74">&#34;yaml&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;json&#34;</span>: <span style="color:#e6db74">&#34;json&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;md&#34;</span>: <span style="color:#e6db74">&#34;markdown&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;c&#34;</span>: <span style="color:#e6db74">&#34;c&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;cpp&#34;</span>: <span style="color:#e6db74">&#34;cpp&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;java&#34;</span>: <span style="color:#e6db74">&#34;java&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;rb&#34;</span>: <span style="color:#e6db74">&#34;ruby&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;go&#34;</span>: <span style="color:#e6db74">&#34;go&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;rs&#34;</span>: <span style="color:#e6db74">&#34;rust&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;sh&#34;</span>: <span style="color:#e6db74">&#34;shell&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;pl&#34;</span>: <span style="color:#e6db74">&#34;perl&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;php&#34;</span>: <span style="color:#e6db74">&#34;php&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;swift&#34;</span>: <span style="color:#e6db74">&#34;swift&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;kotlin&#34;</span>: <span style="color:#e6db74">&#34;kotlin&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;r&#34;</span>: <span style="color:#e6db74">&#34;r&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;m&#34;</span>: <span style="color:#e6db74">&#34;objectivec&#34;</span>,
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">&#34;h&#34;</span>: <span style="color:#e6db74">&#34;c&#34;</span>
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                language <span style="color:#f92672">=</span> language_map<span style="color:#f92672">.</span>get(ext, <span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> language:
</span></span><span style="display:flex;"><span>                    content <span style="color:#f92672">+=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;```</span><span style="color:#e6db74">{</span>language<span style="color:#e6db74">}</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    content <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;```</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>  <span style="color:#75715e"># fallback to a default code block if extension is not in the map</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">with</span> file_path<span style="color:#f92672">.</span>open(<span style="color:#e6db74">&#34;r&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>                    content <span style="color:#f92672">+=</span> f<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                content <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">```</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>                print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Error reading file </span><span style="color:#e6db74">{</span>file_path<span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> content
</span></span></code></pre></div><h2 id="step-5-saving-to-file">Step 5: Saving to File</h2>
<p>We&rsquo;ll create a function to save the merged content to a structured file.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">save_to_file</span>(content, output_path):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">with</span> output_path<span style="color:#f92672">.</span>open(<span style="color:#e6db74">&#34;w&#34;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;utf-8&#34;</span>) <span style="color:#66d9ef">as</span> file:
</span></span><span style="display:flex;"><span>            file<span style="color:#f92672">.</span>write(content)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Error writing to output file </span><span style="color:#e6db74">{</span>output_path<span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><h2 id="step-6-copying-to-clipboard">Step 6: Copying to Clipboard</h2>
<p>We&rsquo;ll create a function to copy the merged content to the clipboard.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">copy_to_clipboard</span>(content):
</span></span><span style="display:flex;"><span>    root <span style="color:#f92672">=</span> tk<span style="color:#f92672">.</span>Tk()
</span></span><span style="display:flex;"><span>    root<span style="color:#f92672">.</span>withdraw()  <span style="color:#75715e"># Hide the main window</span>
</span></span><span style="display:flex;"><span>    root<span style="color:#f92672">.</span>clipboard_clear()
</span></span><span style="display:flex;"><span>    root<span style="color:#f92672">.</span>clipboard_append(content)
</span></span><span style="display:flex;"><span>    root<span style="color:#f92672">.</span>update()  <span style="color:#75715e"># Now it stays on the clipboard after the window is closed</span>
</span></span><span style="display:flex;"><span>    root<span style="color:#f92672">.</span>destroy()
</span></span></code></pre></div><h2 id="step-7-main-function">Step 7: Main Function</h2>
<p>Finally, we&rsquo;ll create the main function to parse the command-line arguments and execute the script.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    parser <span style="color:#f92672">=</span> argparse<span style="color:#f92672">.</span>ArgumentParser(description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Merge files with specified extensions.&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-e&#34;</span>, <span style="color:#e6db74">&#34;--extensions&#34;</span>, nargs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*&#34;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;List of file extensions to merge.&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-f&#34;</span>, <span style="color:#e6db74">&#34;--filename&#34;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Name of the output file (default: merged.md).&#34;</span>)
</span></span><span style="display:flex;"><span>    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;-s&#34;</span>, <span style="color:#e6db74">&#34;--skip-folders&#34;</span>, nargs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;*&#34;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;List of folder names to skip.&#34;</span>)
</span></span><span style="display:flex;"><span>    args <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    extensions <span style="color:#f92672">=</span> args<span style="color:#f92672">.</span>extensions <span style="color:#f92672">or</span> DEFAULT_EXTENSIONS
</span></span><span style="display:flex;"><span>    skip_folders <span style="color:#f92672">=</span> args<span style="color:#f92672">.</span>skip_folders <span style="color:#f92672">or</span> []
</span></span><span style="display:flex;"><span>    root_path <span style="color:#f92672">=</span> Path<span style="color:#f92672">.</span>cwd()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    folder_structure <span style="color:#f92672">=</span> create_folder_structure_illustration(root_path, extensions, skip_folders)
</span></span><span style="display:flex;"><span>    content <span style="color:#f92672">=</span> merge_files(extensions, root_path, skip_folders)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    full_content <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;## Project Structure</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">```</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">{</span>folder_structure<span style="color:#e6db74">}</span><span style="color:#e6db74">```</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">{</span>content<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;Merging:&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> args<span style="color:#f92672">.</span>filename:
</span></span><span style="display:flex;"><span>        output_path <span style="color:#f92672">=</span> Path(args<span style="color:#f92672">.</span>filename)
</span></span><span style="display:flex;"><span>        save_to_file(full_content, output_path)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Merged and saved to: </span><span style="color:#e6db74">{</span>output_path<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        copy_to_clipboard(full_content)
</span></span><span style="display:flex;"><span>        print(folder_structure)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;Merged and copied to clipboard!&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>You&rsquo;ve now created a Python script that converts project directories into a structured format suitable for feeding code to AI/LLM. This script will help you prepare your codebase by generating a structured file that includes the project structure and the contents of the files, making it easier for the AI/LLM to process and understand the code. You can further enhance the script by adding more features or improving the existing ones.</p>
<p><strong>update</strong></p>
<p>The script is now a command-line program published on pypy named &lsquo;code-merger&rsquo;.</p>
<h3 id="resources">Resources</h3>
<ul>
<li>The code for this tutorial <a href="https://github.com/raphael2692/code-merger/blob/main/merge/merge.py">on my GitHub</a></li>
</ul>

    </div>
    <div class="post-footer">
      <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-www-raffaelespataro-it" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </article>

    </main>
  </body>
</html>
